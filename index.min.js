const express=require("express"),http=require("http"),bodyParser=require("body-parser"),mongoose=require("mongoose"),cors=require("cors"),app=express(),apiRoutes=require("./api-routes");app.use(bodyParser.urlencoded({extended:!0})),app.use(bodyParser.json()),mongoose.connect(process.env.MONGODB_URI,{useNewUrlParser:!0});const db=mongoose.connection;db?console.log("DataBase connected successfully"):console.log("Error connecting db");const port=process.env.PORT||8e3;app.use(cors({origin:"*",credentials:!0})),app.use("/",express.static("public")),app.use("/api",apiRoutes),app.use(function(e,o,s){o.header("Access-Control-Allow-Origin","*"),o.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),o.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s()}),app.listen(port,function(){console.log("Running server on port "+port)});const httpGet=e=>http.get(e);setInterval(()=>httpGet("http://headway-json.herokuapp.com"),3e5);